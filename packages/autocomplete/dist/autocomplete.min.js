var Autocomplete=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function n(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(e,t){return e.matches?e.matches(t):e.msMatchesSelector?e.msMatchesSelector(t):e.webkitMatchesSelector?e.webkitMatchesSelector(t):null},l=function(e,t){return e.closest?e.closest(t):function(e,t){for(var n=e;n&&1===n.nodeType;){if(o(n,t))return n;n=n.parentNode}return null}(e,t)},u=function(e){return Boolean(e&&"function"==typeof e.then)};return n((function t(){var n=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=o.search,r=o.autoSelect,a=void 0!==r&&r,c=o.setValue,d=void 0===c?function(){}:c,h=o.setAttribute,f=void 0===h?function(){}:h,v=o.onUpdate,b=void 0===v?function(){}:v,p=o.onSubmit,R=void 0===p?function(){}:p,w=o.onShow,m=void 0===w?function(){}:w,g=o.autocorrect,x=void 0!==g&&g,S=o.onHide,I=void 0===S?function(){}:S,y=o.onLoading,A=void 0===y?function(){}:y,k=o.onLoaded,U=void 0===k?function(){}:k,L=o.submitOnEnter,C=void 0!==L&&L;e(this,t),s(this,"value",""),s(this,"searchCounter",0),s(this,"results",[]),s(this,"selectedIndex",-1),s(this,"selectedResult",null),s(this,"destroy",(function(){n.search=null,n.setValue=null,n.setAttribute=null,n.onUpdate=null,n.onSubmit=null,n.autocorrect=null,n.onShow=null,n.onHide=null,n.onLoading=null,n.onLoaded=null})),s(this,"handleInput",(function(e){var t=e.target.value;n.updateResults(t),n.value=t})),s(this,"handleKeyDown",(function(e){var t=e.key;switch(t){case"Up":case"Down":case"ArrowUp":case"ArrowDown":var s="ArrowUp"===t||"Up"===t?n.selectedIndex-1:n.selectedIndex+1;e.preventDefault(),n.handleArrows(s);break;case"Tab":n.selectResult();break;case"Enter":var o=e.target.getAttribute("aria-activedescendant").length>0;n.selectedResult=n.results[n.selectedIndex]||n.selectedResult,n.selectResult(),n.submitOnEnter?n.selectedResult&&n.onSubmit(n.selectedResult):o?e.preventDefault():(n.selectedResult&&n.onSubmit(n.selectedResult),n.selectedResult=null);break;case"Esc":case"Escape":n.hideResults(),n.setValue();break;default:return}})),s(this,"handleFocus",(function(e){var t=e.target.value;n.updateResults(t),n.value=t})),s(this,"handleBlur",(function(){n.hideResults()})),s(this,"handleResultMouseDown",(function(e){e.preventDefault()})),s(this,"handleResultClick",(function(e){var t=e.target,s=l(t,"[data-result-index]");if(s){n.selectedIndex=parseInt(s.dataset.resultIndex,10);var o=n.results[n.selectedIndex];n.selectResult(),n.onSubmit(o)}})),s(this,"handleArrows",(function(e){var t=n.results.length;n.selectedIndex=(e%t+t)%t,n.onUpdate(n.results,n.selectedIndex)})),s(this,"selectResult",(function(){var e=n.results[n.selectedIndex];e&&n.setValue(e),n.hideResults()})),s(this,"updateResults",(function(e){var t=++n.searchCounter;n.onLoading(),n.search(e).then((function(e){t===n.searchCounter&&(n.results=e,n.onLoaded(),0!==n.results.length?(n.selectedIndex=n.autoSelect?0:-1,n.onUpdate(n.results,n.selectedIndex),n.showResults()):n.hideResults())}))})),s(this,"showResults",(function(){n.setAttribute("aria-expanded",!0),n.onShow()})),s(this,"hideResults",(function(){n.selectedIndex=-1,n.results=[],n.setAttribute("aria-expanded",!1),n.setAttribute("aria-activedescendant",""),n.onUpdate(n.results,n.selectedIndex),n.onHide()})),s(this,"checkSelectedResultVisible",(function(e){var t=e.querySelector('[data-result-index="'.concat(n.selectedIndex,'"]'));if(t){var s=e.getBoundingClientRect(),o=t.getBoundingClientRect();o.top<s.top?e.scrollTop-=s.top-o.top:o.bottom>s.bottom&&(e.scrollTop+=o.bottom-s.bottom)}})),this.search=u(i)?i:function(e){return Promise.resolve(i(e))},this.autoSelect=a,this.setValue=d,this.setAttribute=f,this.onUpdate=b,this.onSubmit=R,this.autocorrect=x,this.onShow=m,this.onHide=I,this.onLoading=A,this.onLoaded=U,this.submitOnEnter=C}))}();
