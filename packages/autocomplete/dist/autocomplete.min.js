var Autocomplete=function(){"use strict";function e(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var s=0;s<n.length;s++){var o=n[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,e(o.key),o)}}function s(e,t,s){return t&&n(e.prototype,t),s&&n(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(t,n,s){return(n=e(n))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,t}var u=function(e,t){return e.matches?e.matches(t):e.msMatchesSelector?e.msMatchesSelector(t):e.webkitMatchesSelector?e.webkitMatchesSelector(t):null},r=function(e,t){return e.closest?e.closest(t):function(e,t){for(var n=e;n&&1===n.nodeType;){if(u(n,t))return n;n=n.parentNode}return null}(e,t)},i=function(e){return Boolean(e&&"function"==typeof e.then)};return s((function e(){var n=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=s.search,l=s.autoSelect,a=void 0!==l&&l,c=s.setValue,d=void 0===c?function(){}:c,h=s.setAttribute,f=void 0===h?function(){}:h,v=s.onUpdate,b=void 0===v?function(){}:v,p=s.onSubmit,m=void 0===p?function(){}:p,R=s.onShow,w=void 0===R?function(){}:R,g=s.autocorrect,S=void 0!==g&&g,x=s.onHide,y=void 0===x?function(){}:x,I=s.onLoading,A=void 0===I?function(){}:I,k=s.onLoaded,U=void 0===k?function(){}:k,E=s.submitOnEnter,L=void 0!==E&&E;t(this,e),o(this,"value",""),o(this,"searchCounter",0),o(this,"results",[]),o(this,"selectedIndex",-1),o(this,"selectedResult",null),o(this,"destroy",(function(){n.search=null,n.setValue=null,n.setAttribute=null,n.onUpdate=null,n.onSubmit=null,n.autocorrect=null,n.onShow=null,n.onHide=null,n.onLoading=null,n.onLoaded=null})),o(this,"handleInput",(function(e){var t=e.target.value;n.updateResults(t),n.value=t})),o(this,"handleKeyDown",(function(e){var t=e.key;switch(t){case"Up":case"Down":case"ArrowUp":case"ArrowDown":var s="ArrowUp"===t||"Up"===t?n.selectedIndex-1:n.selectedIndex+1;e.preventDefault(),n.handleArrows(s);break;case"Tab":n.selectResult();break;case"Enter":var o=e.target.getAttribute("aria-activedescendant").length>0;n.selectedResult=n.results[n.selectedIndex]||n.selectedResult,n.selectResult(),n.submitOnEnter?n.selectedResult&&n.onSubmit(n.selectedResult):o?e.preventDefault():(n.selectedResult&&n.onSubmit(n.selectedResult),n.selectedResult=null);break;case"Esc":case"Escape":n.hideResults(),n.setValue();break;default:return}})),o(this,"handleFocus",(function(e){var t=e.target.value;n.updateResults(t),n.value=t})),o(this,"handleBlur",(function(){n.hideResults()})),o(this,"handleResultMouseDown",(function(e){e.preventDefault()})),o(this,"handleResultClick",(function(e){var t=e.target,s=r(t,"[data-result-index]");if(s){n.selectedIndex=parseInt(s.dataset.resultIndex,10);var o=n.results[n.selectedIndex];n.selectResult(),n.onSubmit(o)}})),o(this,"handleArrows",(function(e){var t=n.results.length;n.selectedIndex=(e%t+t)%t,n.onUpdate(n.results,n.selectedIndex)})),o(this,"selectResult",(function(){var e=n.results[n.selectedIndex];e&&n.setValue(e),n.hideResults()})),o(this,"updateResults",(function(e){var t=++n.searchCounter;n.onLoading(),n.search(e).then((function(e){t===n.searchCounter&&(n.results=e,n.onLoaded(),0!==n.results.length?(n.selectedIndex=n.autoSelect?0:-1,n.onUpdate(n.results,n.selectedIndex),n.showResults()):n.hideResults())}))})),o(this,"showResults",(function(){n.setAttribute("aria-expanded",!0),n.onShow()})),o(this,"hideResults",(function(){n.selectedIndex=-1,n.results=[],n.setAttribute("aria-expanded",!1),n.setAttribute("aria-activedescendant",""),n.onUpdate(n.results,n.selectedIndex),n.onHide()})),o(this,"checkSelectedResultVisible",(function(e){var t=e.querySelector('[data-result-index="'.concat(n.selectedIndex,'"]'));if(t){var s=e.getBoundingClientRect(),o=t.getBoundingClientRect();o.top<s.top?e.scrollTop-=s.top-o.top:o.bottom>s.bottom&&(e.scrollTop+=o.bottom-s.bottom)}})),this.search=i(u)?u:function(e){return Promise.resolve(u(e))},this.autoSelect=a,this.setValue=d,this.setAttribute=f,this.onUpdate=b,this.onSubmit=m,this.autocorrect=S,this.onShow=w,this.onHide=y,this.onLoading=A,this.onLoaded=U,this.submitOnEnter=L}))}();
